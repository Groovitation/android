# Test: Push notification token is registered
# Verifies the NotificationTokenComponent bridge works

appId: io.blaha.groovitation
name: Push Notification Token Registration
---
- launchApp:
    clearState: true

# Wait for page to load
- extendedWaitUntil:
    visible: ".*"
    timeout: 15000

# The app should automatically request notification permission on first launch
# Accept notification permission if prompted
- runFlow:
    when:
      visible: "Allow|ALLOW"
    commands:
      - tapOn:
          text: "Allow|ALLOW"

- takeScreenshot: screenshots/04-after-permission

# Check logcat for token registration (this is more of a manual verification)
# The actual token registration happens via Bridge Component when page loads
# We can verify by checking the app doesn't crash and loads correctly

- assertVisible:
    text: ".*"
    enabled: true
